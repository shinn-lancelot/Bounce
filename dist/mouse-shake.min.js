!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).MouseShake=e()}(this,function(){"use strict";var t={el:"",container:"body",effect:1,direction:1,effectConfig:{maxAngle:30,moveSpeed:40},transitionDuration:.1,keep:!1,debug:!1},e=function(){};e.extend=function(t,e){for(var o in e)if(o in t){if(t[o].constructor===e[o].constructor)if(t[o].constructor===Object){var n=t[o],i=e[o];for(var s in i)n[s]=i[s];t[o]=n}else t[o]=e[o]}else t[o]=e[o];return t};var o={type:"git",url:"https://github.com/shinn-lancelot/mouse-shake.git"},n=function t(e){if(void 0===e&&(e={}),!(this instanceof t))return new t(e);this.init(e),this.checkOptions()&&(this.calCenterPosition(),this.listenMouseMove(),this.listenMouseLeave())};return n.prototype.init=function(o){var n=this;this.options=e.extend(JSON.parse(JSON.stringify(t)),o),this.enable=!0,this.elObjs=document.querySelectorAll(this.options.el),this.containerObj=document.querySelector(this.options.container),this.elObjs.forEach(function(t){t.style.transitionProperty="transform",t.style.transitionDuration=n.options.transitionDuration+"s"}),this.bindHandleMouseMove=this.handleMouseMove.bind(this),this.bindHandleMouseLeave=this.handleMouseLeave.bind(this)},n.prototype.checkOptions=function(){return this.options.el?"string"==typeof this.options.el||(console.error("el参数必须是字符串"),!1):(console.error("缺少el参数"),!1)},n.prototype.calCenterPosition=function(){this.centerPosition=this.getCenterPostion(this.containerObj)},n.prototype.listenMouseMove=function(){this.containerObj.addEventListener("mousemove",this.bindHandleMouseMove)},n.prototype.listenMouseLeave=function(){this.containerObj.addEventListener("mouseleave",this.bindHandleMouseLeave)},n.prototype.handleMouseMove=function(t){var e=this;this.enable&&window.requestAnimationFrame(function(){var o=e.getPosition(t),n=e.calcDeltaPostion(o,e.centerPosition),i=e.calOffsetPercent(o,e.centerPosition);e.options.debug&&console.log("center-position:"+JSON.stringify(e.centerPosition)+"\nposition:"+JSON.stringify(o)+"\ndelta-position:"+JSON.stringify(n)+"\noffset-percent:"+JSON.stringify(i)+"\n"),e.elObjs.forEach(function(t){e.effect(t,i,n)})})},n.prototype.handleMouseLeave=function(){var t=this;this.enable&&(this.options.keep||setTimeout(function(){t.elObjs.forEach(function(e){1===t.options.effect?e.style.transform="rotateX(0) rotateY(0)":2===t.options.effect?e.style.transform="translateX(0) translateY(0)":3===t.options.effect&&(e.style.transform="rotateX(0) rotateY(0) translateX(0) translateY(0)")})},1e3*this.options.transitionDuration))},n.prototype.getPosition=function(t){var e=t||window.event;return{x:e.clientX,y:e.clientY}},n.prototype.getCenterPostion=function(t){return{x:t.offsetWidth/2,y:t.offsetHeight/2}},n.prototype.calcDeltaPostion=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},n.prototype.calOffsetPercent=function(t,e){return{xPercent:(t.x-e.x)/e.x,yPercent:(t.y-e.y)/e.y}},n.prototype.effect=function(t,e,o){var n=(e.yPercent*this.options.effectConfig.maxAngle*-1*this.options.direction).toFixed(4),i=(e.xPercent*this.options.effectConfig.maxAngle*this.options.direction).toFixed(4),s=(e.xPercent*this.options.effectConfig.moveSpeed*this.options.direction).toFixed(4),r=(e.yPercent*this.options.effectConfig.moveSpeed*this.options.direction).toFixed(4);1===this.options.effect?t.style.transform="rotateX("+n+"deg) rotateY("+i+"deg)":2===this.options.effect?t.style.transform="translateX("+s+"px) translateY("+r+"px)":3===this.options.effect&&(t.style.transform="rotateX("+n+"deg) rotateY("+i+"deg) translateX("+s+"px) translateY("+r+"px)")},n.prototype.version=function(){var t=["color: bisque","font-weight: bold"].join(";");console.info("%c"+String.fromCodePoint(128070)+" mouse-shake v0.1.0-beta "+String.fromCodePoint(129517)+" "+o.url.replace(/\.git/g,""),t)},n.prototype.enable=function(){this.enable=!0},n.prototype.disable=function(){this.enable=!1},n});
